(function(window,_,$){"use strict";var isInViewport=function(elem){var bounding=elem.getBoundingClientRect();return bounding.top>=0&&bounding.left>=0&&bounding.bottom<=(window.innerHeight||document.documentElement.clientHeight)&&bounding.right<=(window.innerWidth||document.documentElement.clientWidth)};var viewPortWidth=Math.round(window.innerWidth),sidebar=document.getElementById("dlsidebar-listings"),sidebarWrap=document.querySelector(".dlsidebar .dlsidebar-wrapper"),articleHeader=document.querySelector(".dlarticle__header"),articleContent=document.querySelector(".dlarticle__content"),button=document.querySelector(".dlsidebar .dlevent-ticket-wrapper"),actions=document.querySelector(".dlsidebar .dlactions"),socials=document.querySelector(".dlsidebar .dlsocials-links");if(sidebar){var style=window.getComputedStyle(sidebar,null),width=parseInt(style.getPropertyValue("width"))-parseInt(style.getPropertyValue("padding-left"))}if(sidebarWrap){var sidebarMarginTop=parseInt(articleHeader.offsetHeight/2-sidebarWrap.offsetHeight/2)}function render(){setTimeout(function(){var viewPortWidth=Math.round(window.innerWidth),parentNode;if(!viewPortWidth){return}if(1024<=viewPortWidth){parentNode=sidebarWrap}else if(1024>viewPortWidth){sidebarWrap.classList.remove("fixed");sidebarWrap.style.cssText="";parentNode=articleContent}else{return}if(parentNode){if(parentNode===sidebarWrap){if(actions){parentNode.insertBefore(actions,parentNode.children[1])}if(button){parentNode.insertBefore(button,parentNode.children[1])}if(socials){parentNode.insertBefore(socials,parentNode.lastChild)}}else{if(actions){parentNode.insertBefore(actions,parentNode.firstChild)}if(socials){parentNode.insertBefore(socials,parentNode.children[1])}if(button){parentNode.insertBefore(button,parentNode.firstChild)}}}},100)}function stickySidebar(){var viewPortWidth=Math.round(window.innerWidth);if(1024<viewPortWidth){setTimeout(function(){var main=document.getElementById("dlmain"),sidebarWrap=document.querySelector(".sidebar-sticky"),title=document.querySelector(".dlarticle__title"),sidebar=document.getElementById("dlsidebar-listings");if(sidebar){var style=window.getComputedStyle(sidebar,null),width=parseInt(style.getPropertyValue("width"))-parseInt(style.getPropertyValue("padding-left"))}if(!sidebarWrap){return}var sidebarRect=sidebarWrap.getBoundingClientRect(),sidebarParentRect=sidebarWrap.parentElement.getBoundingClientRect();sidebarWrap.style.width=width+"px";if(!isInViewport(title)&&parseInt(sidebarRect.top)<=0){sidebarWrap.classList.add("fixed")}if(parseInt(sidebarRect.top)>0&&parseInt(sidebarRect.top)<=parseInt(title.getBoundingClientRect().top)){sidebarWrap.classList.remove("fixed")}if(parseInt(main.getBoundingClientRect().bottom)<=parseInt(sidebarRect.bottom)){sidebarWrap.classList.add("stop");sidebarWrap.style.marginTop=parseInt(sidebarParentRect.height-sidebarRect.height-120)+"px"}if(sidebarWrap.getBoundingClientRect().y>120){sidebarWrap.classList.remove("stop");sidebarWrap.style.marginTop=""}},100)}}window.addEventListener("load",function(){var sidebar=document.getElementById("dlsidebar-listings"),sidebarWrap=document.querySelector(".dlsidebar-wrapper"),sidebarEl=document.querySelectorAll(".dlsidebar-wrapper > *"),widget=false;_.forEach(sidebarEl,function(item){if(item.classList.contains("dlsidebar__widget")){widget=true}});if(sidebarWrap){sidebarWrap.classList.add("sidebar-sticky");if(1024<viewPortWidth&&sidebarWrap.classList.contains("sidebar-sticky")){sidebarWrap.style.width=width+"px";sidebar.style.marginTop=parseInt(articleHeader.offsetHeight/3)+"px";if(!widget){sidebar.style.marginTop=sidebarMarginTop+"px"}}}render()});window.addEventListener("scroll",function(){stickySidebar()});window.addEventListener("resize",function(){render()})})(window,_,jQuery);